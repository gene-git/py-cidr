py_cidr.CidrMap
===============

.. py:class:: py_cidr.CidrMap(cache_dir: str | None = None)

   Class provides map(cidr) -> some value.

    - ipv4 and ipv6 are cached separately
    - built on CidrCache and Cidr classes

   Args:
       cache_dir (str):
       Optional directory to save cache file


   .. py:method:: _iptype(cidr: str) -> str

      Identify whether cidr is a valid "ipv4" or "ipv6".

      Args:
          cidr (str):
          Input cidr string

      Returns:
          str:
          'ipv4' of 'ipv6' based on cidr or None if invalid cidr string.
          Return empty string '' if unknown.



   .. py:method:: add_cidr(cidr: str, result: str, priv_cache: _NetCache | None)

      Add cidr to cache.

      Args:
          cidr (str):
          Add this cidr string and its associated result value to the map.

          result (str):
          The result value to be associated with this cidr.
          i.e. map(cidr) = result

          priv_data (private):

          If using multiple processes/threads then provide this object
          where changes are kept instead of in the instance cache.
          This way the same instance (and its cache) can be used
          across multiple processes/threads.

          Use CidrMap.create_private_cache() to create private_data




   .. py:method:: create_private_cache() -> _NetCache
      :staticmethod:


      Create and Return private cache object to use with add_cidr().

      This cache has no cache_dir set - memory only.
      Required if one CidrMap instance is used in multiple processes/threads
      Give each process/thread a private data cache and they can be merged
      into the CidrMap instance after they have all completed.

      Returns:
          (private):
          private_cache_data object.



   .. py:method:: lookup(cidr: str) -> Any | None

      Check if cidr is in map.

      Args:
          cidr (str):
          Cidr value to lookup.

      Returns:
          Any | None:
          Result = map(cidr) if found else None.



   .. py:method:: merge(priv_cache: _NetCache | None)

      Merge private cache into our internal cache.

      Args:
          priv_data (_PrivCache):
          The "private data" to add (cidr, result) to the map, then
          this merges content of priv_data into the current data.
          priv_data must be created by CidrMap.create_private_cache()



   .. py:method:: print()

      Print the cache data.



   .. py:method:: save_cache()

      Write cache to files


